<?xml version="1.0"?>
<ruleset name="Money Quiz Coding Standards">
    <description>WordPress coding standards for Money Quiz plugin</description>

    <!-- Files to check -->
    <file>.</file>
    <exclude-pattern>/vendor/</exclude-pattern>
    <exclude-pattern>/node_modules/</exclude-pattern>
    <exclude-pattern>/tests/</exclude-pattern>
    <exclude-pattern>/dist/</exclude-pattern>
    <exclude-pattern>/build/</exclude-pattern>

    <!-- PHP version -->
    <config name="testVersion" value="7.4-"/>

    <!-- WordPress coding standards -->
    <rule ref="WordPress-Extra">
        <!-- Allow short array syntax -->
        <exclude name="Generic.Arrays.DisallowShortArraySyntax"/>
    </rule>
    <rule ref="WordPress-Docs"/>

    <!-- Security rules -->
    <rule ref="WordPress.Security.EscapeOutput"/>
    <rule ref="WordPress.Security.NonceVerification"/>
    <rule ref="WordPress.Security.ValidatedSanitizedInput"/>
    <rule ref="WordPress.DB.PreparedSQL"/>
    
    <!-- Enforce security best practices -->
    <rule ref="WordPress.Security.EscapeOutput">
        <properties>
            <property name="customEscapingFunctions" type="array">
                <element value="money_quiz_escape"/>
            </property>
        </properties>
    </rule>

    <!-- File naming -->
    <rule ref="WordPress.Files.FileName">
        <properties>
            <property name="strict_class_file_names" value="false"/>
        </properties>
        <exclude-pattern>src/</exclude-pattern>
    </rule>

    <!-- Allow composer autoload -->
    <rule ref="WordPress.Files.FileName.InvalidClassFileName">
        <exclude-pattern>src/</exclude-pattern>
    </rule>

    <!-- Text domain -->
    <rule ref="WordPress.WP.I18n">
        <properties>
            <property name="text_domain" type="array">
                <element value="money-quiz"/>
            </property>
        </properties>
    </rule>
</ruleset>